(function(){var Editor;Editor=function(e){var t,o,r;return null==e&&(e={}),t=ace.edit(e.element),t.setTheme("ace/theme/tomorrow"),t.setShowPrintMargin(!1),t.setHighlightActiveLine(!1),t.setDisplayIndentGuides(!1),t.renderer.setShowGutter(!1),t.renderer.setPadding(10),o=t.session,o.setMode("ace/mode/"+e.mode),o.setTabSize(2),o.setUseSoftTabs(!0),o.setUseWrapMode(!1),o.setWrapLimitRange(null,null),o.setUseWorker(!1),r=function(){return e.sourceCodeObservable(t.getValue())},t.removeListener("change",r),t.setValue(e.sourceCodeObservable(),1),t.getSession().setUndoManager(new ace.UndoManager),t.on("change",r),t},window.Example=function(I){var build,codeEditor,compileCode,compileTemplate,compiledCode,compiledTemplate,deactivate,originalCode,originalTemplate,self,sourceCode,sourceTemplate,templateEditor;return null==I&&(I={}),templateEditor=null,codeEditor=null,originalTemplate=I.template,originalCode=I.code,sourceTemplate=Observable(I.template),sourceCode=Observable(I.code),compiledCode=Observable(""),compiledTemplate=Observable(""),compileTemplate=function(e){var t;try{return compiledTemplate(HamletCompiler.compile(e,{runtime:"Runtime",compiler:CoffeeScript,exports:!1})),templateErrors("")}catch(o){return t=o,templateErrors("Template Error: "+t.message)}},compileCode=function(e){var t;try{return compiledCode(CoffeeScript.compile(e,{bare:!0})),codeErrors("")}catch(o){return t=o,codeErrors("Model Error: "+t.message)}},build=function(){var fragment,templateData,templateFn;return templateFn=eval(compiledTemplate()),templateData=eval(compiledCode()),fragment=templateFn(templateData),$(""+I.selector+" .output").html(fragment)},compileTemplate(sourceTemplate(),compiledTemplate),compileCode(sourceCode(),compiledCode),sourceTemplate.observe(compileTemplate),sourceCode.observe(compileCode),compiledCode.observe(build),compiledTemplate.observe(build),deactivate=function(e){return e.active(!1)},self={active:Observable(!1),activate:function(){return examples.forEach(deactivate),self.active(!0)},build:build,"class":function(){return self.active()?"active":void 0},competitorName:I.competitorName,competitorUrl:I.competitorUrl,comparison:I.comparison,configureEditors:function(){return templateEditor=Editor({element:$(I.selector).find(".code.template").get(0),mode:"haml",sourceCodeObservable:self.sourceTemplate}),codeEditor=Editor({element:$(I.selector).find(".code.javascript").get(0),mode:"haml",sourceCodeObservable:self.sourceCode})},description:I.description,header:I.header,hideInactive:function(){return self.active()?void 0:"hidden"},loadIFrame:function(){var e,t,o,r,l,a,i,c;l={".left-column":[{"class":"html",path:""+I.competitorUrl+"/embedded/html"},{"class":"javascript",path:""+I.competitorUrl+"/embedded/js"}],".right-column":[{"class":"result",path:""+I.competitorUrl+"/show"}]};for(o in l)for(t=l[o],i=0,c=t.length;c>i;i++)r=t[i],a=$("<iframe class="+r["class"]+"></iframe"),a.get(0).src=r.path,e=$(""+I.selector+" .competing-example "+o+" ."+r["class"]),e.find("iframe").length||(a=e.html(a));return null},selector:I.selector,sourceTemplate:sourceTemplate,sourceCode:sourceCode,reset:function(){return sourceTemplate(""),sourceCode(""),sourceTemplate(originalTemplate),sourceCode(originalCode),templateErrors(""),codeErrors("")}}}}).call(this);